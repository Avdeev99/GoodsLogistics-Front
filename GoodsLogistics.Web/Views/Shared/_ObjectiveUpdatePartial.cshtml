@using GoodsLogistics.Localization.Resources
@using GoodsLogistics.Models.Enums
@model GoodsLogistics.ViewModels.DTO.ObjectiveUpdateViewModel

    <form method="post" action="@Url.Action("UpdateObjective", "Objective")" data-updateObjectiveForm="updateObjectiveForm">
        <input name="IsValid" type="hidden" value="@ViewData.ModelState.IsValid.ToString()" id="objective-update-modal-modelState" />
        <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">@Resources.OrderInformation</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body" id="objective-update-modal-body">
            @Html.HiddenFor(m => m.ObjectiveId)
            @*<div class="form-group row">
                <div class="col-lg-5">
                    <label>@Resources.Country: @Model.Location.City.Region.Country.Name</label>
                </div>
                <div class="col-lg-3">
                    <label>@Resources.Region: @Model.Location.City.Region.Name</label>
                </div>
                <div class="col-lg-4">
                    <label>@Resources.City: @Model.Location.City.Name</label>
                </div>
            </div>

            <div class="form-group">
                <label>@Resources.Address: @Model.Location.Address</label>
            </div>

            <div class="form-group row">
                <div class="col-lg-5">
                    <label>@Resources.CreationDate: @Model.CreationDate.ToShortDateString()</label>
                </div>
                <div class="col-lg-3">
                    <label>@Resources.GoodName: @Model.Good.Name</label>
                </div>
                <div class="col-lg-4">
                    <label>@Resources.GoodWeight: @Model.Good.Weight</label>
                </div>
            </div>*@

            <div class="form-group row">
                <div class="col-lg-4">
                    <label>@Resources.DeliveryDate</label>
                    @Html.TextBoxFor(x => x.OrderDate, "{0:yyyy-MM-dd}", new { @class = "input", @type = "date" })
                    @Html.ValidationMessageFor(m => m.OrderDate, "", new { @class = "text-danger" })
                </div>
                <div class="col-lg-3">
                    <label>@Resources.Frequency</label>
                    @Html.DropDownListFor(model => model.Frequency,
                        Html.GetEnumSelectList<OrderFrequency>(), Resources.SelectFrequency,
                        new { @class = "input", placeholder = Resources.SelectFrequency, required = "required" })
                    @Html.ValidationMessageFor(m => m.Frequency, "", new { @class = "text-danger" })
                </div>
                <div class="col-lg-4" date>
                    <label>@Resources.EndDate</label>
                    @Html.TextBoxFor(x => x.EndDate, "{0:yyyy-MM-dd}", new { @class = "input", @type = "date" })
                    @Html.ValidationMessageFor(m => m.EndDate, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group row">
                <div class="col-lg-5">
                    <label>@Resources.Provider</label>

                    @if (string.IsNullOrEmpty(Model.SenderCompanyId))
                    {
                        @Html.DropDownListFor(model => model.SenderCompanyId,
                            new SelectList(Model.Providers, "CompanyId", "Name"), Resources.SelectProvider,
                            new { @class = "input", placeholder = Resources.SelectProvider, })
                        @Html.ValidationMessageFor(m => m.SenderCompanyId, "", new { @class = "text-danger" })
                    }
                    else
                    {
                        @Html.DropDownListFor(model => model.SenderCompanyId,
                            new SelectList(Model.Providers, "CompanyId", "Name"), Resources.SelectProvider,
                            new { @class = "input", placeholder = Resources.SelectProvider, disabled = "disabled" })
                        @Html.ValidationMessageFor(m => m.SenderCompanyId, "", new { @class = "text-danger" })

                    }

                </div>
            </div>

            <div class="form-group" data-rulesBlockHolder="rulesBlockHolder">
                <label>@Resources.Rules</label>
                @if (Model.Rules != null && Model.Rules.Any())
                {
                    @foreach (var rule in Model.Rules)
                    {
                        <div class="row" data-ruleItemBlock="ruleItemBlock">
                            <div class="col-lg-10">
                                <textarea name="Rules" class="w-100" rows="4" required>@rule</textarea>
                                @Html.ValidationMessageFor(m => m.Rules, "", new { @class = "text-danger" })

                            </div>
                            <div class="col-lg-2">
                                <button type="button" class="button_empty bg-color" data-deleteRuleButton="deleteRuleButton">
                                    <i class="far fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                    }



                }

                @if (Model.Rules != null && !Model.Rules.Any() || Model.Rules == null)
                {
                    <div class="row" data-ruleItemBlock="ruleItemBlock">
                        <div class="col-lg-10">
                            <textarea name="Rules" class="w-100" rows="4" required></textarea>
                            @Html.ValidationMessageFor(m => m.Rules, "", new { @class = "text-danger" })

                        </div>
                        <div class="col-lg-2">
                            <button type="button" class="button_empty bg-color" data-deleteRuleButton="deleteRuleButton">
                                <i class="far fa-trash-alt"></i>
                            </button>
                        </div>
                    </div>
                }

                <div data-addRuleLinkHolder="addRuleLinkHolder">
                    <a href="#" data-addRuleLink="addRuleLink">@Resources.AddRule</a>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">@Resources.Close</button>
            <button type="button" class="btn btn-primary" data-updateObjectiveSubmitButton="updateObjectiveSubmitButton">@Resources.Submit</button>
        </div>
    </form>
